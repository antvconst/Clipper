install:
    - sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa
    - sudo apt-get update -qq
    - sudo apt-get install -qq checkinstall qt5-qmake qtbase5-dev qtdeclarative5-dev libqt5webkit5-dev libsqlite3-dev git libxcb1-dev libxcb-keysyms1-dev python python-pip
    - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
    - sudo apt-get update -qq
    - sudo apt-get install -qq g++-4.8
    - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 20
    - sudo update-alternatives --set g++ /usr/bin/g++-4.8
    - sudo pip install requests

before_script:
    - wget http://clipperapp.tk/static/build/qpa.tar.gz
    - wget http://clipperapp.tk/static/build/build-package.sh
    - wget http://clipperapp.tk/static/build/description-pak
    - wget http://clipperapp.tk/static/build/dbupload.py
    - gunzip ./qpa.tar.gz
    - tar -xvf ./qpa.tar
    - sudo chmod +x build-package.sh
    - sudo chmod +x dbupload.py
    - sudo mv qpa /usr/include/qt5/QtGui/qpa
    - chmod +x src/configure

script:
    - cd src
    - ./configure travis
    - make

after_success:
    - ../build-package.sh
    - python ../dbupload.py -f clipper_1.3-1_amd64.deb -u falceeffect -t
